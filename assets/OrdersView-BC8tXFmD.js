import{_ as v,a as _,L as y,c as n,d as x,b as t,F as c,h as f,r as $,o,t as l,f as g,w as L,q as M}from"./index-B9-wOpwL.js";var w={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"jeff_hexschool",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:p,VITE_PATH:u}=w,C={data(){return{isLoading:!1,tempOrder:{},selectID:"",orders:[],pages:{}}},methods:{getOrders(s=1){this.isLoading=!0;const a=`${p}/api/${u}/admin/orders?page=${s}`;_.get(a).then(i=>{this.orders=i.data.orders,this.pages=i.data.pagination}).catch(i=>{console.log("err",i)}),setTimeout(()=>{this.isLoading=!1},1e3)},openModal(s="check",a){s=="dele"?this.$refs.dModal.openModal():this.$refs.oModal.openModal(),this.tempOrder={...a}},updatePaid(s){const a=`${p}/api/${u}/admin/order/${s.id}`,i="put",m={is_paid:s.is_paid};_[i](a,{data:m}).then(()=>{})},delOrder(s){const a=`${p}/api/${u}/admin/order/${s}`;_["delete"](a).then(()=>{})}},created(){this.getOrders()},mounted(){},components:{Loading:y}},V={class:"container"},E={class:"mt-4"},D=t("h2",{class:"d-flex justify-content-center",style:{"margin-top":"75px"}},"訂單列表",-1),O={class:"table"},S=t("thead",null,[t("tr",null,[t("th",{width:"120"},"下單時間"),t("th",{width:"120"},"Email"),t("th",null,"訂單品項"),t("th",null,"應付金額"),t("th",{width:"100"},"付款狀態"),t("th",{width:"220"},"編輯")])],-1),T={key:0},I=["textContent"],P={class:"text-start"},R={class:"text-right"},U={class:"form-check form-switch"},B=["id","onUpdate:modelValue","onChange"],A=["for"],N={key:0},j={key:1},q={class:"btn-group"},F=["onClick"],H=["onClick"];function z(s,a,i,m,h,r){const b=$("Loading");return o(),n(c,null,[x(b,{active:h.isLoading},null,8,["active"]),t("div",V,[t("div",E,[D,t("table",O,[S,t("tbody",null,[(o(!0),n(c,null,f(h.orders,e=>(o(),n(c,{key:e.id},[h.orders.length?(o(),n("tr",T,[t("td",null,l(new Date(e.create_at*1e3).toLocaleDateString()),1),t("td",null,[e.user?(o(),n("span",{key:0,textContent:l(e.user.email)},null,8,I)):g("",!0)]),t("td",P,[t("ul",null,[(o(!0),n(c,null,f(e.products,(d,k)=>(o(),n("li",{key:k}," 品項 : "+l(d.product.title)+" / "+l(d.qty)+l(d.product.unit),1))),128))])]),t("td",R,l(e.total),1),t("td",null,[t("div",U,[L(t("input",{class:"form-check-input",type:"checkbox",id:`paidSwitch${e.id}`,"onUpdate:modelValue":d=>e.is_paid=d,onChange:d=>r.updatePaid(e)},null,40,B),[[M,e.is_paid]]),t("label",{class:"form-check-label",for:`paidSwitch${e.id}`},[e.is_paid?(o(),n("span",N,"已付款")):(o(),n("span",j,"未付款"))],8,A)])]),t("td",null,[t("div",q,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:d=>r.openModal("check",e)}," 查看細節 ",8,F),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:d=>r.openModal("dele",e)}," 刪除訂單 ",8,H)])])])):g("",!0)],64))),128))])])])])],64)}const J=v(C,[["render",z]]);export{J as default};
