import{q as h,h as c}from"./index-BzHzv8FH.js";const n=h("statusStore",{stste:()=>({isLoading:!1,addCartLoading:"",cartQtyLoading:"",delCart:"",messages:[]}),actions:{pushMessage(a){const{style:s="success",title:e,content:i}=a;this.messages.push({style:s,title:e,content:i})}}});var g={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"jeff_hexschool",BASE_URL:"/PorkShop/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:o,VITE_PATH:r}=g,t=n(),u=h("cartStore",{stste:()=>({carts:[],cartslength:0}),actions:{getCarts(){t.isLoading=!0;const a=`${o}/api/${r}/cart`;c.get(a).then(s=>{this.carts=s.data.data,this.cartslength=s.data.data.carts.length}).catch(()=>{this.carts=[],this.cartslength=0}),t.isLoading=!1},addToCart(a,s=1){t.isLoading=!0,t.addCartLoading=a;let e=`${o}/api/${r}/cart`,i="post",l={product_id:a,qty:s};c[i](e,{data:l}).then(d=>{t.addCartLoading="",d.data.success&&(this.getCarts(),t.pushMessage({style:"success",title:"加入購物車成功"}))}).catch(()=>{t.addCartLoading="",t.isLoading=!1})},cartChangeQty(a,s=1){t.isLoading=!0,t.cartQtyLoading=a.id;let e=`${o}/api/${r}/cart/${a.id}`,i="put",l={product_id:a.product.id,qty:s};c[i](e,{data:l}).then(d=>{t.cartQtyLoading="",d.data.success&&(this.getCarts(),t.pushMessage({style:"success",title:"加入購物車成功"}))}).catch(d=>{t.pushMessage({style:"danger",title:"加入失敗",content:d.data.message.join("、")}),t.cartQtyLoading="",t.isLoading=!1})},delCartItem(a){t.isLoading=!0,t.delCart=a;let s=`${o}/api/${r}/cart/${a}`;c["delete"](s).then(i=>{t.delCart="",i.data.success&&(this.getCarts(),t.pushMessage({style:"success",title:"刪除品項成功"}))}).catch(()=>{t.isLoading=!1})},delAllCart(){t.isLoading=!0,t.delCart="delAll";let a=`${o}/api/${r}/carts`;c["delete"](a).then(e=>{t.delCart="",e.data.success&&(this.getCarts(),t.pushMessage({style:"success",title:"已清空購物車"}))}).catch(()=>{t.isLoading=!1})}}});export{u as c,n as s};
